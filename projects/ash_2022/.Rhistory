repo_dir <- "~/komodo_research"
proj_dir <- file.path(repo_dir, 'projects', 'ash_2022')
lib_dir <- file.path(repo_dir, 'library')
library(tidyverse)
library(glue)
library(clipr)
library(tictoc)
library(DBI)
library(googlesheets4)
source(file.path(lib_dir, "R/utils.R"))
source(file.path(lib_dir, "R/sql_helper.R"))
source(file.path(lib_dir, "R/sql_utils.R"))
# create ODBC connection
con_odbc <- DBI::dbConnect(
odbc::odbc(), "snowflake",
role = "ANALYST",
warehouse = "LARGE_WH"
)
execute_sql("USE DATABASE SANDBOX_KOMODO;")
execute_sql("USE SCHEMA AYWEI;")
execute_sql("USE ROLE ANALYST;")
execute_sql("USE WAREHOUSE XLARGE_WH;")
# google sheet auth
gs4_auth(
email = gargle::gargle_oauth_email(),
path = NULL,
scopes = "https://www.googleapis.com/auth/spreadsheets",
cache = gargle::gargle_oauth_cache(),
use_oob = gargle::gargle_oob_default(),
token = gargle::token_fetch("https://www.googleapis.com/auth/spreadsheets")
)
